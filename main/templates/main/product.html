{% extends "base.html" %} {% block meta %}
<title>{{ product.name }} - Pacil Station</title>
{% endblock meta %} {% block content %}
<div class="container mx-auto px-4 py-2 overflow-x-hidden">
  <div class="grid lg:grid-cols-2 gap-10 items-start mb-16">
    <div class="w-full">
      <div
        class="relative w-full aspect-[4/3] rounded-xl overflow-hidden shadow-lg"
      >
        <img
          src="{{ product.thumbnail }}"
          alt="{{ product.name }}"
          class="w-full h-full object-cover {% if product.flip_thumbnail %}-scale-x-100{% endif %}"
        />
      </div>
    </div>

    <div class="space-y-6">
      <div>
        {% if user.is_authenticated and product.user == user %}
        <div class="mb-4 relative flex justify-end">
          <details class="dropdown dropdown-end">
            <summary class="btn btn-ghost btn-circle btn-sm p-0">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-6 w-6"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
                stroke-width="2"
              >
                <circle cx="12" cy="5" r="1" />
                <circle cx="12" cy="12" r="1" />
                <circle cx="12" cy="19" r="1" />
              </svg>
            </summary>
            <ul
              class="menu menu-sm dropdown-content right-0 bg-base-100 rounded-box w-48 p-2 shadow-lg mt-2 z-[1] gap-1"
            >
              <li class="w-full">
                <a
                  href="{% url 'main:delete_product' product.id %}"
                  class="w-full flex gap-2 px-3 py-2 rounded-md text-error hover:bg-error/10 text-sm transition-colors"
                  
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-4 w-4"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path d="M10 11v6" />
                    <path d="M14 11v6" />
                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6" />
                    <path d="M3 6h18" />
                    <path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />
                  </svg>
                  Hapus Produk
                </a>
              </li>
              <li class="w-full">
                <a
                  href="{% url 'main:edit_product' product.id %}"
                  class="w-full flex gap-2 px-3 py-2 rounded-md text-sm text-neutral hover:bg-base-200 transition-colors"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-4 w-4"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path
                      d="M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"
                    />
                    <path d="m15 5 4 4" />
                  </svg>
                  Edit Produk
                </a>
              </li>
            </ul>
          </details>
        </div>
        {% endif %}
        <h1 class="text-3xl font-bold mb-3">{{ product.name }}</h1>
        <div class="flex flex-wrap gap-2 mb-4">
          <span class="badge badge-outline">{{ product.brand.name }}</span>

          <span class="badge badge-neutral">{{ product.category }}</span>

          <span class="badge badge-secondary">Size: {{ product.size }}</span>

          <span class="badge badge-success">Stock: {{ product.stock }}</span>
        </div>
      </div>

      <div class="flex items-center gap-2">
        <div class="flex">
          {% for i in "12345" %} {% if forloop.counter <= product.rating %}
          <svg class="w-5 h-5 fill-yellow-400" viewBox="0 0 20 20">
            <path
              d="M10 15.27L16.18 19l-1.64-7.03L20 7.24l-7.19-.61L10 0 7.19 6.63 0 7.24l5.46 4.73L3.82 19z"
            ></path>
          </svg>
          {% else %}
          <svg class="w-5 h-5 fill-gray-300" viewBox="0 0 20 20">
            <path
              d="M10 15.27L16.18 19l-1.64-7.03L20 7.24l-7.19-.61L10 0 7.19 6.63 0 7.24l5.46 4.73L3.82 19z"
            ></path>
          </svg>
          {% endif %} {% endfor %}
        </div>
        <span class="text-sm text-base-content/70"
          >{{ product.rating|floatformat:1 }}/5</span
        >
      </div>

      <div class="text-3xl font-bold">Rp {{ product.price }}</div>

      <div>
        <h2 class="text-xl font-semibold mb-3">Deskripsi Produk</h2>
        <p
          class="leading-relaxed text-base-content/80 break-words whitespace-pre-line"
        >
          {{ product.description }}
        </p>
      </div>
      <div>
        <h3 class="text-base font-medium">
          Penjual: {{ product.user.username|default:"Tidak diketahui" }}
        </h3>
      </div>

      <div class="flex flex-col sm:flex-row gap-3">
        <button class="btn btn-primary" onclick="my_modal_1.showModal()">
          Beli Sekarang
        </button>
      </div>
      <dialog id="my_modal_1" class="modal">
        <div class="modal-box">
          <h3 class="text-lg font-bold">Masih belom selesai</h3>
          <p class="py-4">
            Jangan pikir saya ngerjain semua sampai checkout, capek tau
          </p>
          <div class="modal-action">
            <form method="dialog">
              <button class="btn btn-ghost">Tutup</button>
            </form>
          </div>
        </div>
      </dialog>

      <div class="text-xs text-base-content/60 space-y-1">
        <div>Product ID: {{ product.id }}</div>
        <div>Ditambahkan: {{ product.created_at|date:"d M Y" }}</div>
        <div>Terakhir update: {{ product.updated_at|date:"d M Y H:i" }}</div>
      </div>
    </div>
  </div>

  <div class="mt-8">
    <a href="{% url 'main:show_main' %}" class="btn btn-ghost">
      <span class="gap-2"> ‚Üê </span>
      Kembali ke Beranda
    </a>
  </div>
</div>
{% endblock %}
